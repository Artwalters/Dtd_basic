import {Suspense} from 'react';
import {Await, NavLink, useAsyncValue} from 'react-router';
import {
  type CartViewPayload,
  useAnalytics,
  useOptimisticCart,
} from '@shopify/hydrogen';
import type {HeaderQuery, CartApiQueryFragment} from 'storefrontapi.generated';
import {useAside} from '~/components/Aside';
import {useHeaderScroll} from '~/hooks/useHeaderScroll';
import {useTheme} from '~/contexts/ThemeContext';

interface HeaderProps {
  header: HeaderQuery;
  cart: Promise<CartApiQueryFragment | null>;
  isLoggedIn: Promise<boolean>;
  publicStoreDomain: string;
}

export function Header({
  header,
  isLoggedIn,
  cart,
  publicStoreDomain,
}: HeaderProps) {
  const { headerRef, isScrolled } = useHeaderScroll();

  return (
    <header ref={headerRef} className="header">
      <nav className="header-nav-left">
        <NavLink to="/community" className="header-nav-item">
          Community
        </NavLink>
        <NavLink to="/collections/all" className="header-nav-item">
          Shop
        </NavLink>
      </nav>

      <NavLink to="/" className="header-logo">
        <span className={`header-logo-wrapper ${isScrolled ? 'scrolled' : ''}`}>
          <Logo />
          <LogoSmall />
        </span>
      </NavLink>

      <nav className="header-nav-right">
        <SearchToggle />
        <Suspense fallback="Account">
          <Await resolve={isLoggedIn} errorElement={<NavLink to="/account" className="header-nav-item">Account</NavLink>}>
            {(isLoggedIn) => (
              <NavLink to="/account" className="header-nav-item">
                Account
              </NavLink>
            )}
          </Await>
        </Suspense>
        <CartToggle cart={cart} />
      </nav>
    </header>
  );
}

function SearchToggle() {
  const {open} = useAside();
  return (
    <button className="header-nav-item reset" onClick={() => open('search')}>
      Search
    </button>
  );
}

function ThemeToggle() {
  const {theme, toggleTheme} = useTheme();
  return (
    <button 
      className="header-nav-item reset" 
      onClick={toggleTheme}
      aria-label={`Switch to ${theme === 'light' ? 'dark' : 'light'} mode`}
    >
      {theme === 'light' ? 'üåô' : '‚òÄÔ∏è'}
    </button>
  );
}

function CartBadge({count}: {count: number | null}) {
  const {open} = useAside();
  const {publish, shop, cart, prevCart} = useAnalytics();

  return (
    <a
      href="/cart"
      className="header-nav-item"
      onClick={(e) => {
        e.preventDefault();
        open('cart');
        publish('cart_viewed', {
          cart,
          prevCart,
          shop,
          url: window.location.href || '',
        } as CartViewPayload);
      }}
    >
      Cart{count !== null && count > 0 ? ` (${count})` : ''}
    </a>
  );
}

function CartToggle({cart}: Pick<HeaderProps, 'cart'>) {
  return (
    <Suspense fallback={<CartBadge count={null} />}>
      <Await resolve={cart}>
        <CartBanner />
      </Await>
    </Suspense>
  );
}

function CartBanner() {
  const originalCart = useAsyncValue() as CartApiQueryFragment | null;
  const cart = useOptimisticCart(originalCart);
  return <CartBadge count={cart?.totalQuantity ?? 0} />;
}

function Logo() {
  return (
    <svg
      className="header-logo-image"
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 1332 523.69"
      aria-label="Dare to Dream"
    >
      <g fill="currentColor">
        <path d="M65.12,404.17c-.65.56-1.31,1.15-1.97,1.77,0,0,.72-.63,1.97-1.77Z"/>
        <path d="M245.63,261.36c-4.7,8.96-6.73,7.38-6.73,7.38,7.17-47.13-1.41-85.57-2.17-102.84-.76-17.27,6.41-21.28,6.41-21.28,0,0-9.56,5.32-11.18,2.06-6.98-13.95-23.67-37.03-38.12-44.52-14.44-7.49-33.55-25.74-33.55-25.74l8.31,15.64s-8.8-9.28-27.36-18.08-47.89-29.81-47.89-29.81l16.61,22.97s-9.28-5.86-31.76-13.19C55.3,46.49,0,.2,0,.2,0,.2,20.2,18.98,34.75,46.56c14.55,27.58,48.65,58.2,48.65,58.2-9.12-2.82-22.8-2.39-22.8-2.39,37.57,8.69,47.56,65.26,47.56,65.26-2.28-5.54-13.03-7.93-13.03-7.93,0,0,4.89,2.61,11.18,18.89,6.3,16.29,6.41,67.33,6.41,67.33-9.77-1.95-12.38-8.9-12.38-8.9,19.76,58.2-1.87,101.15-1.87,101.15,5.7-3.99,9.2-11.08,9.2-11.08,0,0-2.36,14.58-3.83,21.91-4.48,22.42-31.2,48.25-38.72,55.16,13.3-11.48,24.8-10.55,24.8-10.55-3.04,21.28-69.72,129.88-69.72,129.88,36.92-60.59,102.08-111.63,102.08-111.63-5.86,8.25-5.32,18.89-5.32,18.89,0,0,17.81-23.46,39.09-36.81,21.28-13.36,39.2-36.6,39.2-36.6l-2.71,16.07c40.61-41.26,53.1-112.07,53.1-112.07ZM141.82,354.53s2.39-21.83,7.82-38.66c5.43-16.83,8.04-65.81,8.04-65.81l-6.19,18.57c5.54-51.31-6.11-108.32-6.11-108.32,2.36-.94,3.5.49,3.5.49l-5.05-30.79c46.75-1.25,57.28,46.86,57.28,46.86l-8.25-8.04c30.62,63.2-3.69,133.24-3.69,133.24,7.06-2.5,9.23-6.84,9.23-6.84-3.47,27.58-56.58,59.29-56.58,59.29Z"/>
        <path d="M204.7,395.05c-1.64,1.81-2.58,2.86-2.58,2.86.87-.93,1.73-1.89,2.58-2.86Z"/>
        <path d="M369.9,330.99c.35.44.55.68.55.68,0,0-.14-.24-.55-.68Z"/>
        <path d="M354.59,293.22c-1.95-22.15-12.81-48.65-10.21-54.3,2.61-5.65,8.47-10.21,8.47-10.21l-10.86,3.26s-19.33-51.47-13.25-80.14c0,0-2.61,2.61-3.91,5.86,0,0-3.69-21.5-19.11-31.06-15.42-9.56-19.44-17.81-19.44-17.81,0,0,5.32,12.87,11.84,20.45,0,0-12.27,5.83-65.43-33.69,0,0,19.71,17.27,29.81,27.04,10.1,9.77,26.22,41.86,3.58,109.95,0,0-11.08,0-15.8-1.79,0,0,13.85,11.89,9.94,28.99-3.82,16.73-17.52,91.95-55.52,135.27,10.34-11.39,48.88-53.07,61.06-55.13l-3.91,16.51s16.29-36.05,33.01-49.95c0,0-8.9,2.61-16.29,8.04l6.95-39.74s13.9-11.08,35.4-9.99c0,0,8.47,36.05,3.91,49.73-4.56,13.68-18.89,32.79-18.89,32.79,0,0,30.41-29.54,46.26-24.76,12.11,3.65,16.36,7.04,17.69,8.44-2.59-3.28-13.58-18.24-15.31-37.76ZM315.52,241.44c-10.7-4.98-22.25,2.54-24.09,3.82-.09.07-.17.14-.26.18,0,0,.09-.07.26-.18,5.29-4.58,10.49-60.08,10.49-60.08,9.15,48.9,12.69,55.43,13.59,56.26.08.04.17.07.25.11,0,0-.08.05-.25-.11Z"/>
        <path d="M405.02,270.04s55.95,58.8,87.88,106.53c0,0-59.29-117.88-55.06-122.55s7.28-5.65,7.28-5.65c0,0-14.44,3.69-20.85-16.61,0,0,20.09-14.5,19.27-36.32s-3.75-32.09-34.37-45.61c-30.62-13.52-42.02-22.97-42.02-22.97,0,0,8.47,13.68,13.36,17.27,0,0-4.29,2.61-70.8-18.24,0,0,39.31,13.57,48.97,45.72l-8.25-7.6s16.56,24.76,11.02,66.29c0,0-.98,6.19-14.99,14.01,0,0,17.75-4.32,18.89,2.32,1.14,6.64-.49,22.93-2.77,23.26,0,0,1.95-.45,2.4,3.34.44,3.69-6.45,51.85-18.58,67.98,4.01-4.99,19.97-24.34,26.35-24.41,7.33-.08,29.32,23.21,29.32,23.21,0,0-13.6-24.51-5.29-40.07,0,0-3.66,3.26-5.86,9.37l.49-64.18s8.96-5.29,10.83.57c1.87,5.86,19.3,34.53,19.3,34.53-.22-.37-8.71-7.33-16.53-10.18ZM415.04,204.64c-8.8,15.56-26.79,19.87-26.79,19.87v-55.3s5.7-.57,7.82,2.04c5.83,7.17,12.54,9.53,12.54,9.53-3.99-3.18-5.13-7.25-5.13-7.25,5.38,2.85,20.36,15.56,11.56,31.11Z"/>
        <path d="M346.41,341.19c-.59.74-.93,1.17-.93,1.17.31-.37.62-.76.93-1.17Z"/>
        <path d="M422.69,139.23s27.8,13.36,30.51,38.98c0,0-1.19,1.85-4.13,2.28,0,0,5.54,2.06,6.19,8.8s1.63,32.03,1.63,32.03h-7.82s9.28,3.8,10.75,22.7c1.47,18.89,5.7,63.36-22.64,79.49,0,0,67.6-39.42,75.09-17.59,0,0,24.76-25.41,27.85-44.63,0,0-2.36,10.97-19.38,13.36-8.14,1.14-18.41-2.28-32.09,2.12,0,0,.16-32.58-3.26-43.65,0,0,14.66.49,15.96,11.89,0,0,6.52-25.74,29.97-31.6,0,0-49.68,10.91-49.92-.16s2.52-13.19,4.48-14.01c0,0-5.38.86-5.33-2.48s-2.97-16.41,11.85-16.9,25.41-5.86,26.14,8.31c0,0,9.04-24.38,38.58-28.51,0,0-31.71,6.73-54.3-6.3,0,0,3.18-8.88,10.91-14.12,0,0-11.65,7.71-28.42,11.62-16.78,3.91-62.63-11.62-62.63-11.62Z"/>
        <path d="M588.94,168.89s-14.5,13.29-26.55,31.49c-5.1,7.71-18.89,7.71-18.89,7.71,0,0,9.88,3.26,13.36,2.17,0,0-8.47,5.97-20.09,5,0,0,4.13,2.71,14.66,2.93s12.71,2.93,12.81,11.08,0,27.91,0,27.91c0,0-.65,12.05-14.66,15.09,0,0,27.91-1.85,35.94,30.73,0,0-3.04-46.31-3.04-86.22,0,0,10.1-2.12,23.13-10.91,0,0-23.9,6.92-23.9-1.14s-.64-21.18,7.23-35.84Z"/>
        <path d="M644.16,215.04s-3.42,1.19-5.76-1.85c-2.33-3.04-9.5-11.73-13.03-11.73s-5.02,1.06-5.02,1.06c0,0-8.8,6.43-14.33,12.05-5.54,5.62-9.85,6.03-10.34,15.56-.49,9.53,0,23.86,0,23.86,0,0-.08,1.87-1.79,2.69,0,0,1.98-.62,3.15,3.37,1.17,3.99,9.61,11.43,9.61,11.43l9.81,9.81s3.41,3.38,8.59,1.78c5.19-1.6,10.59-11.18,19.3-10.32,0,0,.14-11.08,1.66-26.28,1.52-15.2-5.38-14.12-1.85-31.44ZM630.21,248.21c0,3.42-.73,5.17-.73,5.17,0,0-.86,1.55-3.99,5.7-3.14,4.15-5.11,2.02-5.11,2.02,0,0-1.89-1.4-3.85-3.85-1.95-2.44-1.79-4.24-1.79-4.24,0,0-.08-19.74,0-22.53s1.9-4.29,1.9-4.29l5.27-5.1c1.83-1.3,3.34.9,3.34.9,4.85,5.01,4.97,11.69,4.97,11.69v14.54Z"/>
        <path d="M743.31,196.03s1.41-25.63-31.6-37.68c0,0-10.48-2.82-19.33-4.02-8.06-1.09,1.34-5.59,5.96-6.39-7,.66-43.42,3.33-78.28-8.48l26.6,15.5s10.99,7,14.58,28.51c0,0-5.78-.49-8.88-3.66,0,0,2.88,6.24,11.89,18.62s3.47,51.58,3.47,51.58c0,0-3.91-.11-4.89-4.89,0,0-.11,8.58,2.71,14.44,2.82,5.86-5,28.89-21.83,48.21,0,0,19.98-16.94,18.57-12.05-1.41,4.89-26.93,48.43-33.55,67.44,0,0,38.55-54.84,79.81-63.63,0,0-1.41-3.8,6.84-7.38,8.25-3.58,27.26-18.57,27.91-37.9.65-19.33,0-58.2,0-58.2ZM713.36,266.62c-7.09,7.57-21.66,13.03-21.66,13.03,0,0-2.69-37.38,1.47-53.35,0,0-3.26,3.5-3.83,11.16,0,0-1.3-59.05-2.77-65.81,0,0,7.41,4.64,18.08,8.55,10.67,3.91,15.39,15.64,15.39,40.56s.41,38.28-6.68,45.85Z"/>
        <path d="M698.34,147.94c.78-.07,1.21-.12,1.21-.12-.34,0-.75.04-1.21.12Z"/>
        <path d="M781.86,266.45s-.07-.08-.18-.19c.11.12.18.19.18.19Z"/>
        <path d="M788.95,315.12c.1.18.15.29.15.29,0,0-.05-.1-.15-.29Z"/>
        <path d="M820.95,242.35s1.06-2.61,6.6-2.12c0,0-21.26-8.47-18.49-13.19,2.77-4.72,11.4-7.33,16.94-21.99,5.54-14.66,11.32-41.8,2.01-50.49-1.63-1.52-8.93-4.72-9.3-8.31,0,0-1.71,4.15-10.63,2.24-8.92-1.91-20.97-2.2-20.97-2.2,0,0,6.64-7.45,19.91-8.8,0,0-12.79-1.34-40.64,5.99-27.85,7.33-51.53-4.45-51.53-4.45,0,0,8.8,10.32,25.19,16.51,16.4,6.19,13.68,72.86,13.68,72.86,0,0-1.3,3.37-5.21,4.13,0,0,6.52,2.06,6.52,6.95s-2.09,50.6-23.84,71.94c0,0,7.66-2.61,4.4,2.36s-15.55,17.43-15.55,17.43c0,0,32.25-28.83,48.05-27.69,14.27,1.03,19.9,9.9,20.86,11.61-1.38-2.61-11.9-22.93-11.82-37.99.07-14.22,3.69-11.66,4.54-10.85-.9-.95-4.98-5.76-4.54-14.39,0,0,.49-3.75-.73-6.11,0,0,6.68.49,11.24-2.36,0,0,4.72,1.14,9.53,20.36,4.81,19.22,11.97,27.2,11.97,27.2,0,0-10.51-4.97-14.9-9.77,0,0,8.9,12.35,19.55,21.8,10.64,9.45,13.09,18.35,10.86,22.48,0,0,5.92-5.48,9.5-1.68,3.58,3.8,33.72,37.71,33.72,37.71,0,0-58.15-106.12-46.91-119.15ZM801.57,200.49c-10.1,17.1-24.51,21.91-24.51,21.91v-34.61c.81,7.33,4.56,15.39,4.56,15.39,0,0-.57-9.69.08-13.85,3.07-19.54-2.77-24.76-2.77-24.76,0,0,11.97,1.87,17.35,4.4,5.38,2.52,15.39,14.42,5.29,31.52Z"/>
        <path d="M877.69,289.17c-.55-19.8,1.46-51.4,1.46-51.4,11.44,2.56,23.5-2.33,23.5-2.33-.21,2.56-4.78,8.84-4.78,8.84,0,0,8.32-1.16,16.85-15.58,8.53-14.42,37.64-18.61,37.64-18.61h-31.82c4.16-.93,11.75-6.51,11.75-6.51-6.55,3.02-43.36,7.67-43.36,7.67l6.24-5.12-13.52,2.09c.42-9.77,2.29-19.54,2.29-19.54-2.08,3.02-2.91,6.51-2.91,6.51v-26.63c29.53.12,43.67-9.77,43.67-9.77l-7.49,15s10.19-8.84,15.08-11.63c4.89-2.79,14.15-11.63,14.15-11.63-4.47,4.19-10.92,5.35-10.92,5.35,8.11-28.37,32.65-44.19,32.65-44.19-31.2,19.07-54.9,23.72-54.9,23.72,3.95-2.09,4.78-5.12,4.78-5.12-6.03,4.65-34.11,8.72-34.11,8.72,3.33-1.74,3.33-5.47,3.33-5.47-2.7,2.79-17.26,5.47-17.26,5.47,3.74-6.16,2.5-14.77,2.5-14.77-10.81,25.35-39.72,29.54-39.72,29.54,21.11,2.33,21.01,22.79,21.01,22.79-1.77-4.3-6.45-5-6.45-5,7.18,16.98,2.84,40.97,2.84,40.97-7.21-3.88-21.77.31-21.77.31,0,0,8.04-.78,15.25,11.78s7.42,49.38,7.31,64.5c0,0,.93,22.42-22.46,48,0,0,55.21-27.85,65.77-12.07l6.57,10.52s-1.68-5.02.13-8.5c0,0,19.62,11.69,41.17,36.03,0,0-22.63-31.82-24.01-58.74v-21.87s-4.57,12.89-14.72,13.2c-10.16.31-17.72-3.35-22.93-3.97-.87-.1-2.72-.4-2.79-2.62Z"/>
        <path d="M1332,0s-24.57,31.1-69.72,49.51c-45.15,18.41-54.78,28.57-76.36,59.35s-28.77,62.63-28.77,62.63c0,0,14.83-21.37,17.04-16.4s-14.05,77.87-14.05,77.87c0,0-4.43-2.65-4.43-9,0,0-.22,7.83,1.33,25.6s-2.43,20.1-2.43,20.1c0,0-15.05-30.79-15.16-55.33-.11-24.54,3.98-22.22,3.98-22.22,0,0-12.73-1.16-10.18-23.49,2.55-22.32,6.86-30.26,6.86-30.26,0,0-6.64,11.11-8.74,22.64,0,0-5.53-53.9,29.66-84.37,0,0-45.15,41.26-64.9,50.15,0,0-4.4,0-2.41-6.82,0,0-4.9,17.62-13.94,26.9,0,0,8.96-6.67,8.22-2.22-.75,4.44-7.8,18.96-16.76,55.94s-17.93,39.83-17.93,39.83c0,0,9.13-3.33,8.8,2.38s-8.96,29.36-15.27,26.66c0,0,6.31,2.7,2.99,17.3-3.32,14.6-10.62,47.13-28.33,62.47,0,0,31.76-28.57,53.89-4.02s38.07,38.3,38.07,38.3c0,0-39.89-46.6-34.91-93.42,0,0,3.07-33.41,13.11-24.6,0,0-7.3-4.13,1-44.75,8.3-40.63,10.62-41.74,10.62-41.74,0,0,1,39.36,5.98,57.92,0,0,2.82,7.3-3.98,8.89,0,0,7.64-1.75,11.45,12.54,3.82,14.28,9.96,35.87,3.32,29.52,0,0,6.81,4.44,13.94,39.67,0,0-9.79-.79-14.28-7.78,0,0,9.63,20,29.55,37.93,19.92,17.93,27.72,43.64,27.72,43.64,0,0-17.77-55.6-2.49-86.65,2.66-5.4,3.98-26.66,3.98-26.66,0,0-3.82,11.43-7.47,16.19,0,0,1.09-18.18,3.98-33.33.94-4.92,2.93-21.37,2.93-21.37,0,0,6.53,8.78,6.2,16.08,0,0,.06-7.46-1.05-22.06s20.69-67.39,20.69-67.39v87.28s-4.43-1.59-7.41-8.89c0,0,7.64,23.17,4.76,47.08-2.88,23.91,5.98,56.28,5.98,56.28,0,0-2.21,4.44-9.07-3.81,0,0,10.4,42.95,32.09,68.13,0,0-7.97-20.74-.66-15.23s97.27,116.69,97.27,116.69c0,0-91.63-127.67-75.69-208.57,0,0-6.06,11.78-8.63,18.29,0,0-7.11-83.21.5-105.85,1.49-4.44,4.65-13.49,4.65-13.49,0,0-14.28,19.04-13.28,8.09s2.82-82.05,26.72-108.39c0,0-9.3,1.9-16.6,10.95,0,0,18.48-43.38,52.78-78.08,34.3-34.7,34.86-46.66,34.86-46.66Z"/>
        <path d="M1081.95,412.04c1.6,1.96,2.51,3.1,2.51,3.1-.85-1.01-1.68-2.05-2.51-3.1Z"/>
        <path d="M920.97,342.46c-.34.48-.53.74-.53.74,0,0,.13-.27.53-.74Z"/>
        <path d="M920.97,342.46c1.3-1.52,5.44-5.21,17.24-9.17,15.45-5.19,45.08,26.89,45.08,26.89,0,0-13.97-20.76-18.41-35.62-4.44-14.86,3.81-54.02,3.81-54.02,20.95-1.18,34.5,10.85,34.5,10.85l6.77,43.17c-7.2-5.9-15.87-8.73-15.87-8.73,16.3,15.1,32.17,54.25,32.17,54.25l-3.81-17.93c11.87,2.24,49.43,47.51,59.5,59.88-37.03-47.05-50.38-128.75-54.1-146.92-3.81-18.58,9.68-31.49,9.68-31.49-4.6,1.95-15.4,1.95-15.4,1.95-22.06-73.95-6.35-108.8,3.49-119.42,9.84-10.61,29.05-29.37,29.05-29.37-51.8,42.93-63.76,36.6-63.76,36.6,6.35-8.22,11.53-22.21,11.53-22.21,0,0-3.92,8.96-18.94,19.34-15.03,10.38-18.62,33.73-18.62,33.73-1.27-3.54-3.81-6.37-3.81-6.37,5.93,31.14-12.91,87.04-12.91,87.04l-10.58-3.54s5.71,4.95,8.25,11.09c2.54,6.13-8.04,34.91-9.95,58.97-1.68,21.21-12.4,37.46-14.92,41.02ZM973.72,245.32c.08-.04.16-.08.24-.12.88-.91,4.33-8,13.25-61.11,0,0,5.07,60.28,10.22,65.26.16.12.25.2.25.2-.08-.05-.17-.12-.25-.2-1.79-1.39-13.05-9.56-23.47-4.15-.17.17-.24.12-.24.12Z"/>
      </g>
    </svg>
  );
}

function LogoSmall() {
  return (
    <svg
      className="header-logo-image header-logo-small"
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 770.22 647.16"
      fill="currentColor"
      aria-label="Dare to Dream"
    >
      <g>
        <path d="M211.82,30.06s30.68,29.62,49.89,38.15c0,0-3-3.54-4-7.34,0,0,34.35,39.55,108.12,42.09h31.45s87.88-3.13,153.38-74.64c0,0-48.82,59.9-83.91,92.71,0,0,13.47-1.73,25.35-6.14,0,0-12.01,8.94-11.47,20.81,0,0,15.21-.53,19.48-7.74,0,0-1.08,7.74-14.69,18.23-13.61,10.49-9.37,24.46-9.37,24.46,0,0-7.26-3.91-7.61-10.58,0,0-8.13,19.01-8.13,43.91,0,0-.89-60.63-53.54-60.63v20.45s4.89.53,7.38-4.54c0,0-1.69,8.45-7.11,12.98v45.45s19.65-14.23,30.33-19.92c0,0-30.5,29.44-30.64,63.05v16.81s4.27-6,12.94-8c0,0-13.21,4.8-13.21,39.89,0,0,1.47,5.87,11.61,7.87,0,0-10.94-.93-10.94,4.8v32.55s-.27,7.6,4.14,12.14l25.75-33.48s-25.35,36.82-24.55,102.99c0,0-6.67-6.4-7.2-17.88l-5.07,39.59,12.81,24.98-17.08-12.01s-4.8,53.09-9.34,85.91-6.14,90.18-6.14,90.18c0,0-3.2-109.39-7.74-137.4-4.54-28.01-10.67-33.08-10.94-55.76,0,0-4.8,5.6-12.01,9.34,0,0,12.81-21.52,6.14-39.4-6.67-17.88-33.35,2.22-33.35,2.22,0,0,31.48-41.71,31.48-68.21v-40.82l-17.25-22.59,16.45,8.54v-30.77s-4.45-22.59-21.61-33.08c0,0,18.77,3.56,21.43,9.52v-33.8s-3.56-11.67-18.9-30.95c0,0,14.54,4.27,19.41,14.21v-54.41s-52.63.36-52.63,49.53c0,0,.09-25.16-21.97-49.35s-27.39-23.66-36.29-46.6c0,0,8.36,12.27,22.06,16.01,13.7,3.74,26.5,12.1,26.5,12.1,0,0-3.91-16.9-23.48-30.77,0,0,2.79-.72,3.96-.16,0,0-49.23-42.53-59.9-64.5h0Z"/>
        <path d="M250.39,426.88s5.74-7.34,7.87-6.8c6.56,1.64,12.01,0,12.01,0,0,0-8.8-3.2-.27-7.87,8.54-4.67,22.95-26.95,22.95-26.95,16.27-1.07,34.82,11.47,34.82,11.47,0,0-20.01-17.88-24.68-25.75-4.67-7.87-3.7-26.75-3.7-26.75,10.27,14.14,24.51,14.74,24.51,14.74-13.47-17.48-21.26-33.12-23.03-43.89-1.6-9.7-1.15-32.46-.89-59.5.26-27.32,22.68-35.04,22.68-35.04-12.45.8-25.26,6.49-25.26,6.49-17.7-37.53-58.34-56.47-66.75-68.43-10-14.23-20.68-25.88-20.68-25.88,0,0,18.81,23.08-5.6,11.61s-14.41-27.35-14.41-27.35c-8,4-9.07,13.07-9.07,13.07-59.9-26.55-59.36-58.83-59.36-58.83-2.61,14.99,2.7,32.59,4.34,37.49-1.84-2.33-9.31-8.6-37.96-25.08C45.49,59.23,42.69,0,42.69,0c-14.41,31.04,17.88,96.18,17.88,96.18C32.02,69.77,0,59.1,0,59.1c33.08,17.74,74.04,80.57,74.04,80.57-18.54-14.14-66.43-23.61-66.43-23.61,58.94,30.62,84.09,61.55,87.96,86.12,4.22,26.87,3.16,37.31,3.16,37.31-3.51-4.58-16.9-5.5-16.9-5.5,12.1,9.25,15.3,22.59,15.3,22.59v19.21c-9.07-11.38-34.51-19.92-34.51-19.92,0,0,25.08,16.54,32.19,39.13s4.01,77.06,4.01,77.06c-6.54-10.94-23.4-19.25-23.4-19.25,32.07,44.33-6.4,64.21-6.4,64.21,20.07-6.94,37.71-17.96,22.41,14.23-15.3,32.19-75.77,82.18-75.77,82.18,51.4-37.89,90.18-46.96,81.64-37.53-39.35,43.44-50.16,155.99-50.16,155.99,35.34-127.96,112.28-153.37,112.28-153.37-11.47,12.81-17.48,46.16-17.48,46.16,0,0,9.74-19.48,25.35-34.42,15.61-14.94,43.62-14.54,43.62-14.54-17.08-.93-29.62-6.8-29.62-6.8,0,0,8.27-7.07,43.62-19.08,35.35-12.01,82.04,14.81,82.04,14.81-22.68-23.88-56.56-37.75-56.56-37.75v-.02ZM240.67,362.54c.53-11.03-5.51-22.95-5.51-22.95-6.05,67.77-75.06,82.18-75.06,82.18v-11.74c6.05-9.6,16.36-10.14,16.36-10.14-11.56-2.13-17.61-11.21-17.61-11.21v-13.16c-.36-40.73,21.88-73.5,21.88-73.5l-21.48,22.28v-43.36c0-30.15,31.22-49.89,31.22-49.89-18.41,5.6-32.42,19.08-32.42,19.08v-21.08c0-30.68,15.21-34.68,15.21-34.68-7.34-1.6-15.87,6.8-15.87,6.8,0-13.21,7.47-18.14,7.47-18.14,12.32,4.31,32.68,20.01,32.68,20.01-8.14,1.33-10.81,8.94-10.81,8.94,0,0,6.54-6.54,18.81-1.73,12.27,4.8,26.55,25.61,26.55,25.61.13-6.14-7.34-18.54-7.34-18.54,0,0,18.68,11.07,20.68,20.81,2,9.74-7.87,7.34-7.87,7.34,8.8,4.94,8.45,13.3,8.45,13.3v39.75c-5.87-6.76-17.61-9.6-17.61-9.6,19.57,22.95,19.74,39.31,19.74,39.31,0,24.37-7.47,34.33-7.47,34.33v-.02Z"/>
        <path d="M463.27,468.06s46.69-26.81,82.04-14.81c35.35,12.01,43.62,19.08,43.62,19.08,0,0-12.54,5.87-29.62,6.8,0,0,28.01-.4,43.62,14.54s25.35,34.42,25.35,34.42c0,0-6-33.35-17.48-46.16,0,0,76.94,25.41,112.28,153.37,0,0-10.81-112.55-50.16-155.99-8.54-9.43,30.24-.36,81.64,37.53,0,0-60.48-49.98-75.77-82.18-15.3-32.19,2.35-21.17,22.41-14.23,0,0-38.48-19.88-6.4-64.21,0,0-16.86,8.32-23.4,19.25,0,0-3.1-54.47,4.01-77.06s32.19-39.13,32.19-39.13c0,0-25.44,8.54-34.51,19.92v-19.21s3.2-13.34,15.3-22.59c0,0-13.38.92-16.9,5.5,0,0-1.07-10.44,3.16-37.31,3.86-24.58,29.02-55.51,87.96-86.12,0,0-47.89,9.47-66.43,23.61,0,0,40.95-62.83,74.04-80.57,0,0-32.02,10.67-60.56,37.09,0,0,32.28-65.14,17.88-96.18,0,0-2.8,59.23-45.22,83.64-28.64,16.48-36.12,22.75-37.96,25.08,1.64-4.9,6.95-22.49,4.34-37.49,0,0,.53,32.28-59.36,58.83,0,0-1.07-9.07-9.07-13.07,0,0,10.01,15.87-14.41,27.35-24.41,11.47-5.6-11.61-5.6-11.61,0,0-10.68,11.65-20.68,25.88-8.4,11.96-49.05,30.9-66.75,68.43,0,0-12.81-5.69-25.26-6.49,0,0,22.42,7.72,22.68,35.04.26,27.01.82,49.08-.89,59.5-1.77,10.77-9.56,26.41-23.03,43.89,0,0,14.24-.6,24.51-14.74,0,0,.97,18.88-3.7,26.75s-24.68,25.75-24.68,25.75c0,0,18.54-12.54,34.82-11.47,0,0,14.41,22.28,22.95,26.95s-.27,7.87-.27,7.87c0,0,5.45,1.64,12.01,0,2.13-.53,7.87,6.8,7.87,6.8,0,0-33.88,13.87-56.56,37.75h0ZM522.09,331.64s.18-16.36,19.74-39.31c0,0-11.74,2.85-17.61,9.6v-39.75s-.36-8.36,8.45-13.3c0,0-9.87,2.4-7.87-7.34,2-9.74,20.68-20.81,20.68-20.81,0,0-7.47,12.41-7.34,18.54,0,0,14.27-20.81,26.55-25.61,12.27-4.8,18.81,1.73,18.81,1.73,0,0-2.67-7.6-10.81-8.94,0,0,20.37-15.7,32.68-20.01,0,0,7.47,4.94,7.47,18.14,0,0-8.54-8.4-15.87-6.8,0,0,15.21,4,15.21,34.68v21.08s-14.01-13.47-32.42-19.08c0,0,31.22,19.74,31.22,49.89v43.36l-21.48-22.28s22.23,32.77,21.88,73.5v13.16s-6.05,9.07-17.61,11.21c0,0,10.32.53,16.36,10.14v11.74s-69.01-14.41-75.06-82.18c0,0-6.05,11.92-5.51,22.95,0,0-7.47-9.96-7.47-34.33v.02Z"/>
      </g>
    </svg>
  );
}

// Keep HeaderMenu for mobile aside menu
export function HeaderMenu({
  menu,
  primaryDomainUrl,
  viewport,
  publicStoreDomain,
}: {
  menu: HeaderProps['header']['menu'];
  primaryDomainUrl: HeaderProps['header']['shop']['primaryDomain']['url'];
  viewport: 'desktop' | 'mobile';
  publicStoreDomain: HeaderProps['publicStoreDomain'];
}) {
  const className = `header-menu-${viewport}`;
  const {close} = useAside();

  return (
    <nav className={className} role="navigation">
      <NavLink
        className="header-menu-item"
        onClick={close}
        prefetch="intent"
        to="/collections/all"
      >
        Shop
      </NavLink>
      <NavLink
        className="header-menu-item"
        onClick={close}
        prefetch="intent"
        to="/community"
      >
        Community
      </NavLink>
    </nav>
  );
}
