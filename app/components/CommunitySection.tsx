import {useState, useEffect, type ComponentType} from 'react';
import {Link} from 'react-router';

export function CommunitySection() {
  const [CanvasComponent, setCanvasComponent] = useState<ComponentType | null>(null);

  useEffect(() => {
    // Always load the full WebGL canvas (desktop version) on all devices
    import('./CommunityCanvas').then((mod) => {
      setCanvasComponent(() => mod.default);
    });
  }, []);

  return (
    <section className="community-section">
      <div className="section-divider-with-title section-divider-top">
        <div className="section-divider-line section-divider-line-left" />
        <div className="community-title-wrapper">
          <span className="community-subtitle">Join the community</span>
          <h2 className="section-divider-title">Dream Bigger With Us</h2>
        </div>
        <div className="section-divider-line section-divider-line-right" />
      </div>

      <div className="community-sticky-wrapper">
        <div className="community-sticky-content">
          <div className="community-social-links">
            <a
              href="https://www.instagram.com/daretodream_apparel/"
              target="_blank"
              rel="noopener noreferrer"
              className="btn-glass community-social-btn"
              aria-label="Instagram"
            >
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M21.94 7.88C21.9206 7.0503 21.7652 6.2294 21.48 5.45C21.2283 4.78181 20.8322 4.17742 20.32 3.68C19.8226 3.16776 19.2182 2.77166 18.55 2.52C17.7706 2.23484 16.9497 2.07945 16.12 2.06C15.06 2 14.72 2 12 2C9.28 2 8.94 2 7.88 2.06C7.0503 2.07945 6.2294 2.23484 5.45 2.52C4.78181 2.77166 4.17742 3.16776 3.68 3.68C3.16743 4.17518 2.77418 4.78044 2.53 5.45C2.23616 6.22734 2.07721 7.04915 2.06 7.88C2 8.94 2 9.28 2 12C2 14.72 2 15.06 2.06 16.12C2.07721 16.9508 2.23616 17.7727 2.53 18.55C2.77418 19.2196 3.16743 19.8248 3.68 20.32C4.17742 20.8322 4.78181 21.2283 5.45 21.48C6.2294 21.7652 7.0503 21.9206 7.88 21.94C8.94 22 9.28 22 12 22C14.72 22 15.06 22 16.12 21.94C16.9497 21.9206 17.7706 21.7652 18.55 21.48C19.2134 21.219 19.816 20.8242 20.3201 20.3201C20.8242 19.816 21.219 19.2134 21.48 18.55C21.7652 17.7706 21.9206 16.9497 21.94 16.12C21.94 15.06 22 14.72 22 12C22 9.28 22 8.94 21.94 7.88ZM20.14 16C20.1327 16.6348 20.0178 17.2637 19.8 17.86C19.6327 18.2913 19.3773 18.683 19.0501 19.0101C18.723 19.3373 18.3313 19.5927 17.9 19.76C17.3037 19.9778 16.6748 20.0927 16.04 20.1C15.04 20.15 14.67 20.16 12.04 20.16C9.41 20.16 9.04 20.16 8.04 20.1C7.38073 20.1148 6.72401 20.0132 6.1 19.8C5.66869 19.6327 5.27698 19.3773 4.94985 19.0501C4.62272 18.723 4.36734 18.3313 4.2 17.9C3.97775 17.2911 3.86271 16.6482 3.86 16C3.86 15 3.8 14.63 3.8 12C3.8 9.37 3.8 9 3.86 8C3.86271 7.35178 3.97775 6.70893 4.2 6.1C4.36734 5.66869 4.62272 5.27698 4.94985 4.94985C5.27698 4.62272 5.66869 4.36734 6.1 4.2C6.70893 3.97775 7.35178 3.86271 8 3.86C9 3.86 9.37 3.8 12 3.8C14.63 3.8 15 3.8 16 3.86C16.6348 3.86728 17.2637 3.98225 17.86 4.2C18.2913 4.36734 18.683 4.62272 19.0101 4.94985C19.3373 5.27698 19.5927 5.66869 19.76 6.1C19.9959 6.7065 20.1245 7.34942 20.14 8C20.19 9 20.2 9.37 20.2 12C20.2 14.63 20.19 15 20.14 16Z" fill="currentColor"/>
                <path d="M12 6.86C10.9834 6.86 9.98964 7.16146 9.14437 7.72625C8.2991 8.29104 7.64029 9.0938 7.25126 10.033C6.86222 10.9722 6.76044 12.0057 6.95876 13.0028C7.15709 13.9998 7.64663 14.9157 8.36547 15.6345C9.08431 16.3534 10.0002 16.8429 10.9972 17.0412C11.9943 17.2396 13.0278 17.1378 13.967 16.7487C14.9062 16.3597 15.709 15.7009 16.2738 14.8556C16.8385 14.0104 17.14 13.0166 17.14 12C17.14 10.6368 16.5985 9.32941 15.6345 8.36547C14.6706 7.40153 13.3632 6.86 12 6.86ZM12 15.33C11.3414 15.33 10.6976 15.1347 10.15 14.7688C9.60234 14.4029 9.17552 13.8828 8.92348 13.2743C8.67144 12.6659 8.6055 11.9963 8.73399 11.3503C8.86247 10.7044 9.17963 10.111 9.64533 9.64533C10.111 9.17963 10.7044 8.86247 11.3503 8.73399C11.9963 8.6055 12.6659 8.67144 13.2743 8.92348C13.8828 9.17552 14.4029 9.60234 14.7688 10.15C15.1347 10.6976 15.33 11.3414 15.33 12C15.33 12.4373 15.2439 12.8703 15.0765 13.2743C14.9092 13.6784 14.6639 14.0454 14.3547 14.3547C14.0454 14.6639 13.6784 14.9092 13.2743 15.0765C12.8703 15.2439 12.4373 15.33 12 15.33Z" fill="currentColor"/>
                <path d="M17.34 5.46001C17.1027 5.46001 16.8707 5.53039 16.6733 5.66224C16.476 5.7941 16.3222 5.98152 16.2313 6.20079C16.1405 6.42006 16.1168 6.66134 16.1631 6.89411C16.2094 7.12689 16.3236 7.34071 16.4915 7.50853C16.6593 7.67636 16.8731 7.79065 17.1059 7.83695C17.3387 7.88325 17.5799 7.85949 17.7992 7.76866C18.0185 7.67784 18.2059 7.52403 18.3378 7.32669C18.4696 7.12935 18.54 6.89734 18.54 6.66001C18.54 6.34175 18.4136 6.03652 18.1885 5.81148C17.9635 5.58643 17.6583 5.46001 17.34 5.46001Z" fill="currentColor"/>
              </svg>
            </a>
            <a
              href="https://www.tiktok.com/@daretodream_apparel"
              target="_blank"
              rel="noopener noreferrer"
              className="btn-glass community-social-btn"
              aria-label="TikTok"
            >
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12.442 2.017C13.534 2 14.617 2.008 15.7 2C15.7333 3.30012 16.2537 4.54031 17.158 5.475C18.1357 6.35334 19.3796 6.87864 20.691 6.967V10.325C19.4817 10.2953 18.291 10.0204 17.191 9.517C16.7223 9.2927 16.271 9.03364 15.841 8.742C15.833 11.175 15.85 13.608 15.825 16.033C15.7612 17.2107 15.3717 18.3476 14.7 19.317C14.1461 20.1176 13.4118 20.7768 12.5563 21.2415C11.7008 21.7061 10.7481 21.9632 9.775 21.992C8.5819 22.0458 7.39937 21.7471 6.375 21.133C5.53187 20.6323 4.81762 19.9412 4.2894 19.115C3.76118 18.2888 3.43365 17.3504 3.333 16.375C3.317 15.958 3.308 15.542 3.325 15.133C3.41006 14.2785 3.66967 13.4506 4.08773 12.7005C4.50579 11.9504 5.07341 11.2941 5.75542 10.7723C6.43743 10.2505 7.21932 9.87428 8.05264 9.66696C8.88597 9.45963 9.75299 9.42561 10.6 9.567C10.616 10.8 10.566 12.033 10.566 13.267C10.2104 13.1423 9.83375 13.0891 9.45757 13.1105C9.08138 13.1318 8.71313 13.2273 8.37395 13.3914C8.03478 13.5555 7.73137 13.785 7.48117 14.0667C7.23097 14.3484 7.0389 14.6768 6.916 15.033C6.78548 15.4676 6.74599 15.9244 6.8 16.375C6.90809 17.0619 7.26489 17.6852 7.80254 18.1262C8.34018 18.5673 9.02118 18.7953 9.716 18.767C10.1822 18.7533 10.6376 18.6234 11.0408 18.389C11.444 18.1547 11.7823 17.8233 12.025 17.425C12.2106 17.1637 12.3278 16.8602 12.366 16.542C12.45 15.05 12.416 13.567 12.425 12.075C12.434 8.717 12.417 5.367 12.442 2.017Z" fill="currentColor"/>
              </svg>
            </a>
            <a
              href="https://youtube.com/@daretodreamapparel"
              target="_blank"
              rel="noopener noreferrer"
              className="btn-glass community-social-btn"
              aria-label="YouTube"
            >
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M22.062 6.92699C21.9402 6.49091 21.708 6.09363 21.3878 5.77357C21.0675 5.45351 20.6701 5.2215 20.234 5.09999C18.597 4.66099 12.01 4.66099 12.01 4.66099C12.01 4.66099 5.43899 4.65199 3.78499 5.09999C3.34884 5.2215 2.95143 5.45351 2.63119 5.77357C2.31096 6.09363 2.07873 6.49091 1.95699 6.92699C1.64646 8.60303 1.49346 10.3044 1.49999 12.009C1.49417 13.7068 1.64683 15.4015 1.95599 17.071C2.07752 17.5076 2.30976 17.9053 2.6302 18.2258C2.95064 18.5462 3.34842 18.7785 3.78499 18.9C5.41999 19.34 12.01 19.34 12.01 19.34C12.01 19.34 18.58 19.34 20.234 18.9C20.6701 18.7785 21.0675 18.5465 21.3878 18.2264C21.708 17.9064 21.9402 17.5091 22.062 17.073C22.3647 15.4029 22.5113 13.7083 22.5 12.011C22.5124 10.3064 22.3658 8.60435 22.062 6.92699ZM9.90699 15.152V8.85199L15.39 12.005L9.90699 15.152Z" fill="currentColor"/>
              </svg>
            </a>
          </div>
          <Link to="/pages/about" className="btn-glass community-sticky-btn">About Us</Link>
        </div>
      </div>

      <div className="community-canvas" data-cursor="click & drag">
        {CanvasComponent && <CanvasComponent />}
      </div>
      <div className="section-divider section-divider-bottom" />
    </section>
  );
}
